<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScript Learning Hub</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #f9f9f9;
        color: #333;
        line-height: 1.6;
      }

      header {
        background: linear-gradient(135deg, #d53c79, #df2771);
        color: #323330;
        padding: 2rem;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }

      .subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
      }

      .search-container {
        background-color: white;
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        margin-bottom: 2rem;
        text-align: center;
      }

      #searchInput {
        width: 70%;
        padding: 12px 20px;
        border: 2px solid #e0e0e0;
        border-radius: 30px;
        font-size: 1rem;
        outline: none;
        transition: border-color 0.3s;
      }

      #searchInput:focus {
        border-color: #df2771;
      }

      .topics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
      }

      .topic-card {
        background-color: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s, box-shadow 0.3s;
        cursor: pointer;
      }

      .topic-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
      }

      .topic-header {
        background-color: #df2771;
        color: #323330;
        padding: 1.2rem;
        font-size: 1.2rem;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .topic-content {
        padding: 1.5rem;
      }

      .subtopic {
        padding: 0.8rem 1rem;
        margin: 0.5rem 0;
        background-color: #f5f5f5;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background-color 0.2s;
        cursor: pointer;
      }

      .subtopic:hover {
        background-color: #e9e9e9;
      }

      .subtopic i {
        color: #df2771;
      }

      .theory-section {
        display: none;
        background-color: white;
        border-radius: 10px;
        padding: 2rem;
        margin-top: 2rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      .theory-section h3 {
        color: #df2771;
        margin-bottom: 1rem;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 0.5rem;
      }

      .code-example {
        background-color: #2d2d2d;
        color: #f8f8f2;
        padding: 1rem;
        border-radius: 6px;
        margin: 1rem 0;
        overflow-x: auto;
        font-family: "Courier New", monospace;
      }

      .interactive-demo {
        background-color: #f9f9f9;
        border: 1px solid #e0e0e0;
        border-radius: 6px;
        padding: 1.5rem;
        margin: 1rem 0;
      }

      .btn {
        background-color: #df2771;
        color: #323330;
        border: none;
        padding: 10px 20px;
        border-radius: 30px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.3s;
        margin: 5px;
      }

      .btn:hover {
        background-color: #df2771;
      }

      footer {
        text-align: center;
        padding: 2rem;
        margin-top: 3rem;
        background-color: #2d2d2d;
        color: white;
      }

      .game-container {
        background-color: #f0f8ff;
        padding: 1.5rem;
        border-radius: 8px;
        margin: 1rem 0;
      }

      .tag-match-game {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        margin: 15px 0;
      }

      .tag-card {
        background-color: #df2771;
        color: #323330;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .tag-card:hover {
        transform: scale(1.05);
      }

      .tag-match-result {
        margin-top: 15px;
        font-weight: bold;
        text-align: center;
      }

      .content-tabs {
        display: flex;
        margin-bottom: 1rem;
        border-bottom: 1px solid #e0e0e0;
      }

      .tab {
        padding: 8px 16px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
      }

      .tab.active {
        border-bottom: 3px solid #df2771;
        color: #df2771;
        font-weight: bold;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .demo-box {
        width: 100px;
        height: 100px;
        background-color: #df2771;
        margin: 10px;
        display: inline-block;
      }

      .color-box {
        width: 50px;
        height: 50px;
        display: inline-block;
        margin: 5px;
        border: 1px solid #ccc;
      }

      .flex-container {
        display: flex;
        gap: 10px;
        margin: 10px 0;
      }

      .flex-item {
        background-color: #df2771;
        color: #323330;
        padding: 10px;
        border-radius: 4px;
        flex: 1;
        text-align: center;
      }

      .grid-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin: 10px 0;
      }

      .grid-item {
        background-color: #df2771;
        color: #323330;
        padding: 10px;
        border-radius: 4px;
        text-align: center;
      }

      .code-editor {
        width: 100%;
        height: 200px;
        font-family: "Courier New", monospace;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        resize: vertical;
      }

      .output-container {
        margin-top: 15px;
        padding: 15px;
        background-color: #f5f5f5;
        border-radius: 4px;
        border-left: 4px solid #df2771;
      }

      @media (max-width: 768px) {
        .topics-grid {
          grid-template-columns: 1fr;
        }

        #searchInput {
          width: 90%;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>JavaScript Learning Hub</h1>
      <p class="subtitle">Master JavaScript with interactive tutorials</p>
    </header>

    <div class="container">
      <div class="search-container">
        <h2>What do you want to learn today?</h2>
        <input
          type="text"
          id="searchInput"
          placeholder="Search for topics (e.g., Functions, DOM, Async)"
        />
        <button class="btn" onclick="searchTopics()">Search</button>
      </div>

      <h2>JavaScript Topics</h2>
      <div class="topics-grid">
        <!-- Core JavaScript Fundamentals -->
        <div class="topic-card" onclick="showTheory('js-fundamentals')">
          <div class="topic-header">
            <span>Core JavaScript Fundamentals</span>
            <i class="fas fa-code"></i>
          </div>
          <div class="topic-content">
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('js-fundamentals', 'syntax-basics')"
            >
              <span>Syntax & Basics</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('js-fundamentals', 'variables')"
            >
              <span>Variables (var, let, const)</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('js-fundamentals', 'data-types')"
            >
              <span>Data Types</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('js-fundamentals', 'operators')"
            >
              <span>Operators</span>
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>

        <!-- Functions -->
        <div class="topic-card" onclick="showTheory('functions')">
          <div class="topic-header">
            <span>Functions</span>
            <i class="fas fa-cogs"></i>
          </div>
          <div class="topic-content">
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('functions', 'function-types')"
            >
              <span>Function Declaration vs Expression</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('functions', 'arrow-functions')"
            >
              <span>Arrow Functions</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('functions', 'parameters')"
            >
              <span>Parameters & Arguments</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('functions', 'rest-spread')"
            >
              <span>Rest & Spread Operator</span>
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>

        <!-- DOM & Browser -->
        <div class="topic-card" onclick="showTheory('dom-browser')">
          <div class="topic-header">
            <span>DOM & Browser</span>
            <i class="fas fa-window-maximize"></i>
          </div>
          <div class="topic-content">
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('dom-browser', 'dom-manipulation')"
            >
              <span>DOM Manipulation</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('dom-browser', 'events')"
            >
              <span>Events</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('dom-browser', 'browser-apis')"
            >
              <span>Browser APIs</span>
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>

        <!-- Asynchronous JavaScript -->
        <div class="topic-card" onclick="showTheory('async-js')">
          <div class="topic-header">
            <span>Asynchronous JavaScript</span>
            <i class="fas fa-clock"></i>
          </div>
          <div class="topic-content">
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('async-js', 'callbacks')"
            >
              <span>Callbacks</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('async-js', 'promises')"
            >
              <span>Promises</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('async-js', 'async-await')"
            >
              <span>Async/Await</span>
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>

        <!-- OOP & Advanced Concepts -->
        <div class="topic-card" onclick="showTheory('oop-js')">
          <div class="topic-header">
            <span>OOP & Advanced Concepts</span>
            <i class="fas fa-object-group"></i>
          </div>
          <div class="topic-content">
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('oop-js', 'prototypes')"
            >
              <span>Prototypes & Inheritance</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('oop-js', 'classes')"
            >
              <span>Classes</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('oop-js', 'this-keyword')"
            >
              <span>this keyword</span>
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>

        <!-- Modern JavaScript -->
        <div class="topic-card" onclick="showTheory('modern-js')">
          <div class="topic-header">
            <span>Modern JavaScript</span>
            <i class="fas fa-rocket"></i>
          </div>
          <div class="topic-content">
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('modern-js', 'es6-features')"
            >
              <span>ES6+ Features</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('modern-js', 'modules')"
            >
              <span>Modules</span>
              <i class="fas fa-chevron-right"></i>
            </div>
            <div
              class="subtopic"
              onclick="event.stopPropagation(); showSubtopic('modern-js', 'functional-programming')"
            >
              <span>Functional Programming</span>
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Theory Section (initially hidden) -->
      <div id="theory-section" class="theory-section">
        <h3 id="theory-title">JavaScript Fundamentals</h3>

        <div class="content-tabs">
          <div class="tab active" onclick="switchTab('theory')">Theory</div>
          <div class="tab" onclick="switchTab('example')">Example</div>
          <div class="tab" onclick="switchTab('interactive')">Interactive</div>
          <div class="tab" onclick="switchTab('game')">Game</div>
        </div>

        <div id="theory-tab" class="tab-content active">
          <div id="theory-content">
            <p>Select a topic to see the explanation here...</p>
          </div>

          <div class="code-example" id="code-example">
            // Code examples will appear here
          </div>
        </div>

        <div id="example-tab" class="tab-content">
          <h4>Live Example</h4>
          <div id="live-example">
            <p>Examples will appear here when you select a topic.</p>
          </div>
        </div>

        <div id="interactive-tab" class="tab-content">
          <h4>Interactive Demo</h4>
          <div id="interactive-content">
            <p>Try it yourself! This area will have interactive examples.</p>
          </div>
          <button class="btn" id="run-button">Run Code</button>
          <div class="output-container" id="output-container">
            <strong>Output:</strong>
            <div id="output"></div>
          </div>
        </div>

        <div id="game-tab" class="tab-content">
          <h4>Learning Game</h4>
          <div id="game-content">
            <p>Play a game to reinforce your learning!</p>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <p>JavaScript Learning Hub &copy; 2023</p>
      <p>Interactive learning platform for JavaScript programming</p>
    </footer>

    <script>
      // Current active topic and subtopic
      let currentTopic = null;
      let currentSubtopic = null;

      // Function to show theory based on topic
      function showTheory(topicId) {
        currentTopic = topicId;
        currentSubtopic = null;

        const theorySection = document.getElementById("theory-section");
        const theoryTitle = document.getElementById("theory-title");
        const theoryContent = document.getElementById("theory-content");
        const codeExample = document.getElementById("code-example");
        const liveExample = document.getElementById("live-example");
        const interactiveContent = document.getElementById(
          "interactive-content"
        );
        const gameContent = document.getElementById("game-content");

        // Show the theory section
        theorySection.style.display = "block";

        // Scroll to the theory section
        theorySection.scrollIntoView({ behavior: "smooth" });

        // Reset tabs
        switchTab("theory");

        // Set content based on the topic
        switch (topicId) {
          case "js-fundamentals":
            theoryTitle.textContent = "JavaScript Fundamentals";
            theoryContent.innerHTML = `
                        <p>JavaScript is a versatile programming language primarily used for web development.</p>
                        <p>It allows you to create dynamically updating content, control multimedia, animate images, and much more.</p>
                        <p><strong>Key Points:</strong></p>
                        <ul>
                            <li>JavaScript is a high-level, interpreted programming language</li>
                            <li>It conforms to the ECMAScript specification</li>
                            <li>JavaScript is prototype-based and multi-paradigm</li>
                            <li>It supports event-driven, functional, and imperative programming styles</li>
                        </ul>
                    `;
            codeExample.textContent = `// This is a single-line comment

/*
This is a multi-line comment
*/

// Console output
console.log("Hello, World!");

// Variables
let message = "Hello JavaScript";
const PI = 3.14159;
var count = 10;

// Data types
let number = 42; // Number
let text = "Hello"; // String
let isTrue = true; // Boolean
let nothing = null; // Null
let notDefined; // Undefined
let person = {firstName:"John", lastName:"Doe"}; // Object
let numbers = [1, 2, 3, 4, 5]; // Array
`;
            break;
          case "functions":
            theoryTitle.textContent = "JavaScript Functions";
            theoryContent.innerHTML = `
                        <p>Functions are one of the fundamental building blocks in JavaScript.</p>
                        <p>A function is a set of statements that performs a task or calculates a value.</p>
                        <p><strong>Function Types:</strong></p>
                        <ul>
                            <li><strong>Function declarations:</strong> Defined with the function keyword</li>
                            <li><strong>Function expressions:</strong> Functions assigned to variables</li>
                            <li><strong>Arrow functions:</strong> Compact alternative function syntax</li>
                            <li><strong>IIFE:</strong> Immediately Invoked Function Expressions</li>
                        </ul>
                    `;
            codeExample.textContent = `// Function declaration
function greet(name) {
    return "Hello, " + name;
}

// Function expression
const square = function(x) {
    return x * x;
};

// Arrow function
const multiply = (a, b) => a * b;

// Default parameters
function sayHello(name = "Guest") {
    return "Hello, " + name;
}

// Rest parameters
function sum(...numbers) {
    return numbers.reduce((total, num) => total + num, 0);
}

// Callback function
function processUserInput(callback) {
    const name = prompt("Please enter your name.");
    callback(name);
}
`;
            break;
          case "async-js":
            theoryTitle.textContent = "Asynchronous JavaScript";
            theoryContent.innerHTML = `
                        <p>JavaScript is single-threaded, but it can handle asynchronous operations through callbacks, promises, and async/await.</p>
                        <p>Asynchronous programming allows your program to start a potentially long-running task and still be responsive to other events.</p>
                        <p><strong>Key Concepts:</strong></p>
                        <ul>
                            <li><strong>Callbacks:</strong> Functions passed as arguments to be executed later</li>
                            <li><strong>Promises:</strong> Objects representing the eventual completion (or failure) of an async operation</li>
                            <li><strong>Async/Await:</strong> Syntactic sugar built on promises that makes async code easier to write and read</li>
                            <li><strong>Event Loop:</strong> The mechanism that allows JavaScript to handle asynchronous operations</li>
                        </ul>
                    `;
            codeExample.textContent = `// Callback example
function fetchData(callback) {
    setTimeout(() => {
        callback("Data received");
    }, 1000);
}

fetchData((data) => {
    console.log(data);
});

// Promise example
const promise = new Promise((resolve, reject) => {
    setTimeout(() => {
        resolve("Success!");
        // or reject("Error!");
    }, 1000);
});

promise
    .then(result => console.log(result))
    .catch(error => console.error(error));

// Async/Await example
async function fetchDataAsync() {
    try {
        const response = await fetch('https://api.example.com/data');
        const data = await response.json();
        console.log(data);
    } catch (error) {
        console.error("Error:", error);
    }
}

// Promise combinators
Promise.all([promise1, promise2, promise3])
    .then(values => console.log(values))
    .catch(error => console.error(error));
`;
            break;
          case "oop-js":
            theoryTitle.textContent =
              "Object-Oriented Programming in JavaScript";
            theoryContent.innerHTML = `
                        <p>JavaScript uses prototypes for inheritance rather than classical inheritance used in languages like Java or C++.</p>
                        <p>However, ES6 introduced class syntax that provides a cleaner way to create objects and handle inheritance.</p>
                        <p><strong>Key Concepts:</strong></p>
                        <ul>
                            <li><strong>Prototypes:</strong> Objects from which other objects inherit properties</li>
                            <li><strong>Constructor Functions:</strong> Functions used to create objects with a specific blueprint</li>
                            <li><strong>Classes:</strong> Syntactic sugar over JavaScript's existing prototype-based inheritance</li>
                            <li><strong>this keyword:</strong> Refers to the object it belongs to, with different binding rules</li>
                        </ul>
                    `;
            codeExample.textContent = `// Constructor function
function Person(name, age) {
    this.name = name;
    this.age = age;
}

Person.prototype.greet = function() {
    return "Hello, my name is " + this.name;
};

// Class syntax
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }

    greet() {
        return "Hello, my name is " + this.name;
    }

    // Static method
    static compareAges(person1, person2) {
        return person1.age - person2.age;
    }
}

// Inheritance
class Student extends Person {
    constructor(name, age, grade) {
        super(name, age);
        this.grade = grade;
    }

    study() {
        return this.name + " is studying";
    }
}

// this binding examples
const obj = {
    name: "John",
    regularFunction: function() {
        return this.name;
    },
    arrowFunction: () => {
        return this.name; // this is lexically scoped
    }
};
`;
            break;
          default:
            theoryTitle.textContent = "Topic Overview";
            theoryContent.textContent = "Select a topic to view its content.";
            codeExample.textContent = "// Code examples will appear here";
        }

        // Update live example based on topic
        updateLiveExample(topicId);

        // Update interactive content based on topic
        updateInteractiveContent(topicId);

        // Update game content based on topic
        updateGameContent(topicId);
      }

      // Function to show subtopic content
      function showSubtopic(topicId, subtopicId) {
        currentTopic = topicId;
        currentSubtopic = subtopicId;

        const theorySection = document.getElementById("theory-section");
        const theoryTitle = document.getElementById("theory-title");
        const theoryContent = document.getElementById("theory-content");
        const codeExample = document.getElementById("code-example");

        // Show the theory section
        theorySection.style.display = "block";

        // Scroll to the theory section
        theorySection.scrollIntoView({ behavior: "smooth" });

        // Reset tabs
        switchTab("theory");

        // Set content based on the subtopic
        switch (subtopicId) {
          case "variables":
            theoryTitle.textContent = "JavaScript Variables";
            theoryContent.innerHTML = `
                        <p>Variables are containers for storing data values. JavaScript has three ways to declare variables:</p>
                        <p><strong>var:</strong> The original way to declare variables (function-scoped)</p>
                        <p><strong>let:</strong> Introduced in ES6, block-scoped variables that can be reassigned</p>
                        <p><strong>const:</strong> Introduced in ES6, block-scoped variables that cannot be reassigned</p>
                        <p><strong>Key Points:</strong></p>
                        <ul>
                            <li>Always declare variables before use</li>
                            <li>Use const by default, let when you need to reassign, and avoid var</li>
                            <li>Variable names are case-sensitive and can contain letters, digits, underscores, and dollar signs</li>
                            <li>Variable names must begin with a letter, $ or _</li>
                        </ul>
                    `;
            codeExample.textContent = `// Using var (function-scoped)
var x = 10;
if (true) {
    var x = 20; // Same variable
}
console.log(x); // 20

// Using let (block-scoped)
let y = 10;
if (true) {
    let y = 20; // Different variable
}
console.log(y); // 10

// Using const (block-scoped, cannot be reassigned)
const z = 10;
// z = 20; // Error: Assignment to constant variable

// However, const objects and arrays can be modified
const person = { name: "John" };
person.name = "Jane"; // Allowed
person.age = 30; // Allowed

const numbers = [1, 2, 3];
numbers.push(4); // Allowed

// Hoisting behavior
console.log(a); // undefined (var is hoisted)
var a = 10;

// console.log(b); // Error: Cannot access 'b' before initialization
let b = 20;
`;
            break;
          case "arrow-functions":
            theoryTitle.textContent = "Arrow Functions";
            theoryContent.innerHTML = `
                        <p>Arrow functions were introduced in ES6 as a more concise syntax for writing function expressions.</p>
                        <p>They have some important differences from regular functions:</p>
                        <p><strong>Key Characteristics:</strong></p>
                        <ul>
                            <li>Shorter syntax than regular functions</li>
                            <li>Don't have their own <code>this</code>, <code>arguments</code>, <code>super</code>, or <code>new.target</code></li>
                            <li>Always anonymous (can't be used as constructors)</li>
                            <li>Cannot be used as generator functions</li>
                        </ul>
                    `;
            codeExample.textContent = `// Regular function
const regularSum = function(a, b) {
    return a + b;
};

// Arrow function equivalent
const arrowSum = (a, b) => {
    return a + b;
};

// Even shorter with implicit return
const shortSum = (a, b) => a + b;

// Single parameter doesn't need parentheses
const square = x => x * x;

// No parameters need empty parentheses
const greet = () => "Hello World!";

// Returning an object requires parentheses
const createPerson = (name, age) => ({ name: name, age: age });

// this behavior difference
const obj = {
    value: 10,
    regularFunction: function() {
        console.log(this.value); // 10 (this refers to obj)
    },
    arrowFunction: () => {
        console.log(this.value); // undefined (this refers to outer context)
    }
};

// Useful for callbacks
const numbers = [1, 2, 3, 4, 5];
const squared = numbers.map(x => x * x);
const evens = numbers.filter(n => n % 2 === 0);
`;
            break;
          case "promises":
            theoryTitle.textContent = "JavaScript Promises";
            theoryContent.innerHTML = `
                        <p>A Promise is an object representing the eventual completion or failure of an asynchronous operation.</p>
                        <p>Promises help avoid callback hell and make asynchronous code easier to write and read.</p>
                        <p><strong>Promise States:</strong></p>
                        <ul>
                            <li><strong>Pending:</strong> Initial state, neither fulfilled nor rejected</li>
                            <li><strong>Fulfilled:</strong> The operation completed successfully</li>
                            <li><strong>Rejected:</strong> The operation failed</li>
                        </ul>
                        <p><strong>Promise Methods:</strong></p>
                        <ul>
                            <li><code>then()</code>: Handles fulfillment</li>
                            <li><code>catch()</code>: Handles rejection</li>
                            <li><code>finally()</code>: Handles both fulfillment and rejection</li>
                            <li><code>Promise.all()</code>: Waits for all promises to resolve</li>
                            <li><code>Promise.race()</code>: Returns when the first promise settles</li>
                        </ul>
                    `;
            codeExample.textContent = `// Creating a promise
const myPromise = new Promise((resolve, reject) => {
    // Asynchronous operation
    setTimeout(() => {
        const success = Math.random() > 0.3;
        
        if (success) {
            resolve("Operation succeeded!");
        } else {
            reject("Operation failed!");
        }
    }, 1000);
});

// Using a promise
myPromise
    .then(result => {
        console.log("Success:", result);
    })
    .catch(error => {
        console.error("Error:", error);
    })
    .finally(() => {
        console.log("Operation completed (success or failure)");
    });

// Chaining promises
fetch('https://api.example.com/data')
    .then(response => response.json())
    .then(data => {
        console.log(data);
        return processData(data);
    })
    .then(processedData => {
        console.log(processedData);
    })
    .catch(error => {
        console.error("Error in chain:", error);
    });

// Promise.all - wait for all promises to resolve
const promise1 = Promise.resolve(3);
const promise2 = 42;
const promise3 = new Promise((resolve, reject) => {
    setTimeout(resolve, 100, 'foo');
});

Promise.all([promise1, promise2, promise3])
    .then(values => {
        console.log(values); // [3, 42, "foo"]
    });

// Promise.race - get the first settled promise
Promise.race([promise1, promise3])
    .then(value => {
        console.log(value); // 3 (since promise1 is already resolved)
    });
`;
            break;
          default:
            theoryTitle.textContent = "Subtopic Details";
            theoryContent.textContent =
              "Detailed content for this subtopic will appear here.";
            codeExample.textContent = "// Code examples for this subtopic";
        }

        // Update other tabs based on the subtopic
        updateLiveExample(topicId, subtopicId);
        updateInteractiveContent(topicId, subtopicId);
        updateGameContent(topicId, subtopicId);
      }

      // Function to update live example based on topic/subtopic
      function updateLiveExample(topicId, subtopicId = null) {
        const liveExample = document.getElementById("live-example");

        if (subtopicId === "variables") {
          liveExample.innerHTML = `
                    <h3>Variable Examples:</h3>
                    <p>Open your browser console to see the output of these examples.</p>
                    <div class="code-example">
// var example
var x = 10;
console.log("Initial x:", x);
if (true) {
    var x = 20;
    console.log("Inside block x:", x);
}
console.log("After block x:", x);

// let example
let y = 10;
console.log("Initial y:", y);
if (true) {
    let y = 20;
    console.log("Inside block y:", y);
}
console.log("After block y:", y);

// const example
const z = 10;
console.log("Initial z:", z);
// z = 20; // This would cause an error
                    </div>
                    <button class="btn" onclick="runVariableExamples()">Run Examples</button>
                `;
        } else if (subtopicId === "arrow-functions") {
          liveExample.innerHTML = `
                    <h3>Arrow Function Examples:</h3>
                    <p>Open your browser console to see the output of these examples.</p>
                    <div class="code-example">
// Regular function
function multiply(a, b) {
    return a * b;
}

// Arrow function equivalent
const multiplyArrow = (a, b) => a * b;

console.log("Regular function:", multiply(5, 3));
console.log("Arrow function:", multiplyArrow(5, 3));

// this context example
const obj = {
    value: 42,
    regular: function() {
        console.log("Regular function this:", this.value);
    },
    arrow: () => {
        console.log("Arrow function this:", this.value);
    }
};

obj.regular(); // 42
obj.arrow();   // undefined (or window.value if it exists)
                    </div>
                    <button class="btn" onclick="runArrowFunctionExamples()">Run Examples</button>
                `;
        } else if (topicId === "async-js") {
          liveExample.innerHTML = `
                    <h3>Async JavaScript Examples:</h3>
                    <p>Open your browser console to see the output of these examples.</p>
                    <div class="code-example">
// Simulated async function with callback
function fetchDataCallback(callback) {
    setTimeout(() => {
        callback("Data from callback");
    }, 1000);
}

// Using the callback
fetchDataCallback(data => {
    console.log(data);
});

// Simulated async function with promise
function fetchDataPromise() {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve("Data from promise");
        }, 1000);
    });
}

// Using the promise
fetchDataPromise()
    .then(data => console.log(data))
    .catch(error => console.error(error));

// Async/await version
async function fetchDataAsync() {
    try {
        const data = await fetchDataPromise();
        console.log("Data with async/await:", data);
    } catch (error) {
        console.error(error);
    }
}

fetchDataAsync();
                    </div>
                    <button class="btn" onclick="runAsyncExamples()">Run Examples</button>
                `;
        } else {
          liveExample.innerHTML = `<p>Live examples will appear here when you select a topic or subtopic.</p>`;
        }
      }

      // Function to update interactive content
      function updateInteractiveContent(topicId, subtopicId = null) {
        const interactiveContent = document.getElementById(
          "interactive-content"
        );
        const runButton = document.getElementById("run-button");

        if (subtopicId === "variables") {
          interactiveContent.innerHTML = `
                    <p>Experiment with JavaScript variables:</p>
                    <textarea class="code-editor" id="variable-editor">
// Try different variable declarations
var globalVar = "I'm a global variable";
let blockScoped = "I'm block scoped";
const constantValue = "I can't be reassigned";

console.log("Global variable:", globalVar);
console.log("Block scoped variable:", blockScoped);
console.log("Constant value:", constantValue);

// Try to reassign const (this will cause an error)
// constantValue = "New value";

// Test variable scoping
if (true) {
    var insideBlock = "I'm inside a block";
    let scopedInside = "I'm scoped to this block";
    console.log("Inside block:", scopedInside);
}

console.log("Var inside block is accessible:", insideBlock);
// console.log("Let inside block is not accessible:", scopedInside); // This would error
                    </textarea>
                `;
          runButton.onclick = () => runCode("variable-editor");
        } else if (subtopicId === "arrow-functions") {
          interactiveContent.innerHTML = `
                    <p>Experiment with arrow functions:</p>
                    <textarea class="code-editor" id="arrow-function-editor">
// Convert these regular functions to arrow functions

// Regular function
function add(a, b) {
    return a + b;
}

// Arrow function equivalent
const addArrow = (a, b) => a + b;

console.log("Regular function result:", add(5, 3));
console.log("Arrow function result:", addArrow(5, 3));

// More examples
const numbers = [1, 2, 3, 4, 5];

// Using regular function as callback
const squares = numbers.map(function(x) {
    return x * x;
});

// Using arrow function as callback
const squaresArrow = numbers.map(x => x * x);

console.log("Squares with regular function:", squares);
console.log("Squares with arrow function:", squaresArrow);

// this context difference
const obj = {
    value: 10,
    regularFunc: function() {
        console.log("Regular function this.value:", this.value);
    },
    arrowFunc: () => {
        console.log("Arrow function this.value:", this.value);
    }
};

obj.regularFunc(); // 10
obj.arrowFunc();   // undefined (or global this.value if it exists)
                    </textarea>
                `;
          runButton.onclick = () => runCode("arrow-function-editor");
        } else {
          interactiveContent.innerHTML = `<p>Interactive examples will appear here when you select a topic or subtopic.</p>`;
          runButton.onclick = () => alert("Select a subtopic to run code");
        }
      }

      // Function to update game content
      function updateGameContent(topicId, subtopicId = null) {
        const gameContent = document.getElementById("game-content");

        if (subtopicId === "variables") {
          gameContent.innerHTML = `
                    <div class="game-container">
                        <h4>Variable Declaration Game</h4>
                        <p>Choose the correct variable declaration for each scenario:</p>
                        <div class="tag-match-game">
                            <div class="tag-card" onclick="checkAnswer(this, 'const', 'A value that should not be reassigned')">const</div>
                            <div class="tag-card" onclick="checkAnswer(this, 'let', 'A value that might change within a block')">let</div>
                            <div class="tag-card" onclick="checkAnswer(this, 'var', 'Legacy declaration (avoid if possible)')">var</div>
                        </div>
                        <div class="tag-match-result" id="variable-game-result"></div>
                    </div>
                `;
        } else if (subtopicId === "arrow-functions") {
          gameContent.innerHTML = `
                    <div class="game-container">
                        <h4>Arrow Function Conversion Game</h4>
                        <p>Convert the following function to an arrow function:</p>
                        <div class="code-example">
function multiply(a, b) {
    return a * b;
}
                        </div>
                        <input type="text" id="arrow-conversion" placeholder="Enter arrow function equivalent">
                        <button class="btn" onclick="checkArrowConversion()">Check Answer</button>
                        <div class="tag-match-result" id="arrow-game-result"></div>
                    </div>
                `;
        } else {
          gameContent.innerHTML = `<p>Learning games will appear here when you select a topic or subtopic.</p>`;
        }
      }

      // Function to run code in interactive demos
      function runCode(editorId) {
        const code = document.getElementById(editorId).value;
        const outputContainer = document.getElementById("output");

        // Clear previous output
        outputContainer.innerHTML = "";

        // Capture console.log output
        const originalConsoleLog = console.log;
        console.log = function () {
          originalConsoleLog.apply(console, arguments);
          const args = Array.from(arguments)
            .map((arg) => (typeof arg === "object" ? JSON.stringify(arg) : arg))
            .join(" ");
          outputContainer.innerHTML += args + "<br>";
        };

        try {
          // Execute the code
          eval(code);
        } catch (error) {
          outputContainer.innerHTML += `<span style="color: red;">Error: ${error.message}</span><br>`;
        }

        // Restore original console.log
        console.log = originalConsoleLog;
      }

      // Function to run specific examples
      function runVariableExamples() {
        console.log("=== Variable Examples ===");

        // var example
        var x = 10;
        console.log("Initial x:", x);
        if (true) {
          var x = 20;
          console.log("Inside block x:", x);
        }
        console.log("After block x:", x);

        // let example
        let y = 10;
        console.log("Initial y:", y);
        if (true) {
          let y = 20;
          console.log("Inside block y:", y);
        }
        console.log("After block y:", y);

        // const example
        const z = 10;
        console.log("Initial z:", z);
        // z = 20; // This would cause an error

        console.log("=== End Variable Examples ===");
      }

      function runArrowFunctionExamples() {
        console.log("=== Arrow Function Examples ===");

        // Regular function
        function multiply(a, b) {
          return a * b;
        }

        // Arrow function equivalent
        const multiplyArrow = (a, b) => a * b;

        console.log("Regular function:", multiply(5, 3));
        console.log("Arrow function:", multiplyArrow(5, 3));

        // this context example
        const obj = {
          value: 42,
          regular: function () {
            console.log("Regular function this:", this.value);
          },
          arrow: () => {
            console.log("Arrow function this:", this.value);
          },
        };

        obj.regular(); // 42
        obj.arrow(); // undefined

        console.log("=== End Arrow Function Examples ===");
      }

      function runAsyncExamples() {
        console.log("=== Async Examples ===");

        // Simulated async function with callback
        function fetchDataCallback(callback) {
          setTimeout(() => {
            callback("Data from callback");
          }, 1000);
        }

        // Using the callback
        fetchDataCallback((data) => {
          console.log(data);
        });

        // Simulated async function with promise
        function fetchDataPromise() {
          return new Promise((resolve, reject) => {
            setTimeout(() => {
              resolve("Data from promise");
            }, 1000);
          });
        }

        // Using the promise
        fetchDataPromise()
          .then((data) => console.log(data))
          .catch((error) => console.error(error));

        console.log("=== End Async Examples ===");
      }

      // Function to check answers in games
      function checkAnswer(element, correctAnswer, explanation) {
        const resultDiv = document.getElementById("variable-game-result");
        const userAnswer = element.textContent.trim();

        if (userAnswer === correctAnswer) {
          resultDiv.innerHTML = `<span style="color: green;">Correct! ${explanation}</span>`;
          element.style.backgroundColor = "#28a745";
        } else {
          resultDiv.innerHTML = `<span style="color: red;">Incorrect. Try again!</span>`;
          element.style.backgroundColor = "#dc3545";
        }

        setTimeout(() => {
          element.style.backgroundColor = "#f7df1e";
        }, 1000);
      }

      function checkArrowConversion() {
        const userAnswer = document
          .getElementById("arrow-conversion")
          .value.trim();
        const resultDiv = document.getElementById("arrow-game-result");

        // Simple validation - could be more robust
        const correctAnswers = [
          "const multiply = (a, b) => a * b;",
          "let multiply = (a, b) => a * b;",
          "var multiply = (a, b) => a * b;",
          "const multiply = (a, b) => { return a * b; };",
          "let multiply = (a, b) => { return a * b; };",
          "var multiply = (a, b) => { return a * b; };",
        ];

        if (correctAnswers.includes(userAnswer)) {
          resultDiv.innerHTML = `<span style="color: green;">Correct! Well done.</span>`;
        } else {
          resultDiv.innerHTML = `<span style="color: red;">Not quite. The simplest answer is: const multiply = (a, b) => a * b;</span>`;
        }
      }

      // Function to switch between tabs
      function switchTab(tabName) {
        // Hide all tab contents
        document.querySelectorAll(".tab-content").forEach((tab) => {
          tab.classList.remove("active");
        });

        // Deactivate all tabs
        document.querySelectorAll(".tab").forEach((tab) => {
          tab.classList.remove("active");
        });

        // Activate selected tab
        document.getElementById(tabName + "-tab").classList.add("active");

        // Activate tab button
        document.querySelectorAll(".tab").forEach((tab) => {
          if (tab.textContent.toLowerCase() === tabName) {
            tab.classList.add("active");
          }
        });
      }

      // Function for the property matching game
      function matchProperty(element, propertyName) {
        const resultDiv = document.getElementById("property-match-result");

        const propertyValues = {
          color: "red, blue, #ffffff, rgb(0,0,0)",
          "font-size": "12px, 1.2em, larger, 120%",
          margin: "10px, 5%, auto, 1em 2em",
          display: "block, inline, flex, grid, none",
        };

        const values = propertyValues[propertyName];
        resultDiv.innerHTML = `<strong>${propertyName}</strong> can have values like: ${values}`;

        // Visual feedback
        element.style.backgroundColor = "#28a745";
        setTimeout(() => {
          element.style.backgroundColor = "#f7df1e";
        }, 1000);
      }

      // Function to search topics
      function searchTopics() {
        const searchText = document
          .getElementById("searchInput")
          .value.toLowerCase();

        if (searchText) {
          // Simple search implementation
          const topics = document.querySelectorAll(".topic-card, .subtopic");
          let found = false;

          topics.forEach((topic) => {
            const topicText = topic.textContent.toLowerCase();
            if (topicText.includes(searchText)) {
              topic.style.backgroundColor = "#fff3cd";
              topic.scrollIntoView({ behavior: "smooth", block: "center" });
              found = true;
            } else {
              topic.style.backgroundColor = "";
            }
          });

          if (!found) {
            alert(
              `No results found for "${searchText}". Try a different search term.`
            );
          }
        }
      }

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        // Add event listener for the run button
        document
          .getElementById("run-button")
          .addEventListener("click", function () {
            // This is handled in updateInteractiveContent now
          });

        // Make Enter key trigger search
        document
          .getElementById("searchInput")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              searchTopics();
            }
          });
      });
    </script>
  </body>
</html>
